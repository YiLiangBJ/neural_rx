# verify_gpu.py - 系统能力验证脚本使用说明

## 功能概述

`verify_gpu.py` 是一个全面的系统能力验证工具,可以检测:

1. **系统信息**: 操作系统、主机名、架构、Python 版本
2. **CPU 信息**: 核心数、频率、实时使用率
3. **内存信息**: RAM 和 SWAP 的总量、可用量、使用率
4. **磁盘信息**: 各分区的容量和使用情况
5. **GPU 检测**: TensorFlow 和 PyTorch 的 GPU 支持
6. **CUDA/cuDNN**: 版本信息和计算性能测试
7. **性能评估**: 根据硬件配置自动给出使用建议

## 使用方法

### 基本用法

```bash
# 激活虚拟环境后运行
python verify_gpu.py
```

### 输出示例

```
============================================================
🔍 系统能力验证工具
============================================================

============================================================
系统信息
============================================================
系统: Windows
节点名称: YiLiang-mobl1
发行版本: 10
版本: 10.0.19045
机器类型: AMD64
处理器: Intel64 Family 6 Model 141 Stepping 1, GenuineIntel

Python 版本: 3.10.11
Python 路径: C:\GitRepo\neural_rx\.venv\Scripts\python.exe

============================================================
CPU 信息
============================================================
物理核心数: 4
逻辑核心数 (含超线程): 8
最大频率: 2803.00 MHz
最小频率: 0.00 MHz
当前频率: 2803.00 MHz

CPU 总体使用率: 15.2%
各核心使用率:
  核心 0: 12.5%
  核心 1: 18.3%
  ...

============================================================
内存信息
============================================================
总内存: 15.75GB
可用内存: 8.23GB
已用内存: 7.52GB (47.8%)

SWAP 总量: 18.12GB
SWAP 可用: 12.45GB
SWAP 已用: 5.67GB (31.3%)

============================================================
磁盘信息
============================================================

设备: C:\
  挂载点: C:\
  文件系统类型: NTFS
  总空间: 476.45GB
  已用: 234.12GB
  可用: 242.33GB
  使用率: 49.1%

============================================================
检查 TensorFlow GPU 支持
============================================================
✅ TensorFlow 版本: 2.15.0

✅ GPU 可用: True
   检测到 1 块 GPU:
   - GPU 0: /physical_device:GPU:0

   CUDA 版本: 12.3
   cuDNN 版本: 8.9

   ✅ GPU 计算测试成功

============================================================
验证总结
============================================================
✅ 系统: Windows 10
✅ CPU: 4 核心 / 8 线程
✅ 内存: 15.75GB (8.23GB 可用)
✅ TensorFlow GPU 支持正常
ℹ️  PyTorch 未安装

============================================================
性能评估
============================================================
🚀 推荐用途: 深度学习训练和推理 (GPU 加速)

============================================================
```

## 性能评估说明

脚本会根据硬件配置自动评估:

| 配置 | 评估结果 |
|------|---------|
| 有 GPU | 🚀 深度学习训练和推理 (GPU 加速) |
| 8+ 核心 + 16GB+ 内存 | 💻 深度学习训练和推理 (CPU 模式) |
| 4+ 核心 + 8GB+ 内存 | 📊 小规模训练、推理和实验 |
| 其他 | ⚠️  仅用于代码开发和调试 |

## 依赖要求

- `psutil>=5.9.0` - 系统信息查询
- `tensorflow` - GPU 检测(可选)
- `torch` - PyTorch GPU 检测(可选)

已在 `pyproject.toml` 中自动包含。

## 故障排除

### Windows 编码错误

脚本已包含 Windows 编码修复,如果仍有问题:

```bash
# 设置环境变量
export PYTHONIOENCODING=utf-8
python verify_gpu.py
```

### 无法获取 CPU 频率

某些虚拟机或容器环境可能无法获取 CPU 频率信息,这是正常的。

### TensorFlow/PyTorch 未安装

如果对应框架未安装,脚本会显示警告但继续运行。

## 高级用法

### 重定向输出到文件

```bash
python verify_gpu.py > system_info.txt 2>&1
```

### 定期检查(Linux)

```bash
# 添加到 crontab 每天检查一次
0 9 * * * cd /path/to/neural_rx && python verify_gpu.py > /tmp/system_check_$(date +\%Y\%m\%d).log 2>&1
```

### 远程服务器检查

```bash
# SSH 执行
ssh user@remote-server "cd /path/to/neural_rx && source .venv/bin/activate && python verify_gpu.py"
```

## 输出解读

- ✅ 绿色勾号: 功能正常或硬件可用
- ❌ 红叉: 功能不可用或检测失败
- ⚠️  警告: 建议关注的项目
- ℹ️  信息: 提示性信息
- 🚀/💻/📊 性能评估图标

## 相关文档

- [快速开始](QUICKSTART.md)
- [配置总结](CONFIGURATION_SUMMARY.md)
- [完整设置指南](SETUP.md)
